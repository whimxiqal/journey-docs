"use strict";(self.webpackChunkjourney_docs=self.webpackChunkjourney_docs||[]).push([[698],{3905:(e,a,t)=>{t.d(a,{Zo:()=>g,kt:()=>c});var n=t(7294);function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){i(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,i=function(e,a){if(null==e)return{};var t,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(i[t]=e[t]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=n.createContext({}),p=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},g=function(e){var a=p(e.components);return n.createElement(l.Provider,{value:a},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},v=n.forwardRef((function(e,a){var t=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),u=p(t),v=i,c=u["".concat(l,".").concat(v)]||u[v]||d[v]||r;return t?n.createElement(c,o(o({ref:a},g),{},{components:t})):n.createElement(c,o({ref:a},g))}));function c(e,a){var t=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=v;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=t[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}v.displayName="MDXCreateElement"},6766:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=t(7462),i=(t(7294),t(3905));const r={sidebar_label:"Navigation API",sidebar_position:3,description:"Submit custom navigators"},o="The Navigation API",s={unversionedId:"dev/navigation-api",id:"dev/navigation-api",title:"The Navigation API",description:"Submit custom navigators",source:"@site/docs/dev/navigation-api.md",sourceDirName:"dev",slug:"/dev/navigation-api",permalink:"/docs/dev/navigation-api",draft:!1,editUrl:"https://github.com/journey-docs/docs/dev/navigation-api.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_label:"Navigation API",sidebar_position:3,description:"Submit custom navigators"},sidebar:"tutorialSidebar",previous:{title:"Search API",permalink:"/docs/dev/search-api"},next:{title:"JourneyAgent",permalink:"/docs/dev/journey-agent"}},l={},p=[{value:"Navigating",id:"navigating",level:2},{value:"<code>NavigatorDetails</code> and <code>NavigatorOptions</code>",id:"navigatordetails-and-navigatoroptions",level:3},{value:"Registering Custom Navigator Types",id:"navigator-registration",level:2}],g={toc:p};function u(e){let{components:a,...t}=e;return(0,i.kt)("wrapper",(0,n.Z)({},g,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"the-navigation-api"},"The Navigation API"),(0,i.kt)("p",null,"The Navigation API should be used to register custom navigator types at the startup of the server and to generate custom navigators as needed throughout its lifetime."),(0,i.kt)("p",null,"Access the ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigationApi")," like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"JourneyApi journey = JourneyApiProvider.get();\nNavigationApi navigating = journey.navigating();\n")),(0,i.kt)("h2",{id:"navigating"},"Navigating"),(0,i.kt)("p",null,"You may navigate in game manually with ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigationApi#navigate")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigationApi#navigatePlayer"),". Usually, you would call this after a search is completed:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'JourneyApi journeyApi = JourneyApiProvider.get();\njourneyApi.searching().runPlayerDestinationSearch(...).thenAccept(result -> {\n  if (result.status() != SearchResult.Status.SUCCESS) {\n    /* failure! */\n    return;\n  }\n  journeyApi.navigating().navigatePlayer(playerUuid, result.path(), /* optional "details" */);\n});\n')),(0,i.kt)("h3",{id:"navigatordetails-and-navigatoroptions"},(0,i.kt)("inlineCode",{parentName:"h3"},"NavigatorDetails")," and ",(0,i.kt)("inlineCode",{parentName:"h3"},"NavigatorOptions")),(0,i.kt)("p",null,"Every ",(0,i.kt)("inlineCode",{parentName:"p"},"Navigator")," has associated ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorOptions"),", as designated by the ",(0,i.kt)("inlineCode",{parentName:"p"},"Navigator"),"'s ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorFactory"),'. In game players and API users may specify values for these "options" to alter the behavior of an individual ',(0,i.kt)("inlineCode",{parentName:"p"},"Navigator"),". ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorDetails")," hold the raw information about these option values. These are then accessible within the ",(0,i.kt)("inlineCode",{parentName:"p"},"Navigator")," via a helpful interface (",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorOptionValues"),")."),(0,i.kt)("p",null,"It is recommended to use a ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorDetailsBuilder``Navigator"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorFactory"),"'s associated ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorDetailsBuilder"),"."),(0,i.kt)("h2",{id:"navigator-registration"},"Registering Custom Navigator Types"),(0,i.kt)("p",null,"You may register a new ",(0,i.kt)("inlineCode",{parentName:"p"},"Navigator")," type by creating and registering a ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorFactory"),". A ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorFactory")," contains global information about its ",(0,i.kt)("inlineCode",{parentName:"p"},"Navigators")," and contains the logic for generating them."),(0,i.kt)("p",null,'Let\'s take an example where I am building a "Siren" navigator, where players are led to their destinations by the sounds of a designated Minecraft sound that are always coming from a location just a few blocks ahead of the player.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="MyPlugin.java"',title:'"MyPlugin.java"'},'@Override\npublic void onEnable() {\n  NavigationApi navigating = ...;\n  navigating.registerNavigator(NavigatorFactory.builder("MyPlugin", "siren")\n    .supplier(SirenNavigator::new)\n    // The conventional pattern for permissions for navigators is "journey.flag.navigator.<id>"\n    .permission("journey.flag.navigator.siren")\n    .build());\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="SirenNavigator.java"',title:'"SirenNavigator.java"'},"public class SirenNavigator implements Navigator {\n  JourneyAgent agent;\n  NavigationProgress progress;\n  NavigatorOptionValues options;\n\n  public SirenNavigator(JourneyAgent agent, NavigationProgress progress, NavigatorOptionValues optionValues) {\n    this.agent = agent;\n    this.progress = progress;\n    this.optionValues = optionValues;\n  }\n\n  @Override\n  public void start() {\n    // Schedule a task that periodically makes a sound a little bit ahead of the player\n  }\n\n  @Override\n  public void stop() {\n    // Cancel the scheduled task\n  }\n\n}\n")),(0,i.kt)("p",null,"The permission is for in-game use. Only players with the permission may specify this navigator when executing a search command with the ",(0,i.kt)("a",{parentName:"p",href:"/docs/commands#navigator-flag"},'"navigator flag"'),"."),(0,i.kt)("p",null,"You may also add ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorOptions")," to your ",(0,i.kt)("inlineCode",{parentName:"p"},"NavigatorFactory"),". This will allow players and users of the API to alter the behavior of their subsequently generated ",(0,i.kt)("inlineCode",{parentName:"p"},"Navigator"),'. In the case of my "siren" ',(0,i.kt)("inlineCode",{parentName:"p"},"Navigator"),", I might want to let people specify the type of sound they want to hear:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="MyPlugin.java"',title:'"MyPlugin.java"'},'private static final Set<String> ALLOWED_SOUNDS = /* Set of allowed sounds */;\n\n@Override\npublic void onEnable() {\n  NavigationApi navigating = ...;\n  navigating.registerNavigator(NavigatorFactory.builder("MyPlugin", "siren")\n    .supplier(SirenNavigator::new)\n    .permission("journey.flag.navigator.siren")\n    .option(NavigatorOption.stringValueBuilder("sound")\n      .defaultValue("entity.villager.yes")\n      .valueSuggestions(() -> /* get list of Minecraft sounds */))\n      // Some sounds may be unsupported, so you can validate them here\n      .validator(sound -> ALLOWED_SOUNDS.contains(sound) ? null : "Sound not allowed: " + sound)\n      .permission("journey.flag.navigator.siren")\n      .valuePermission(sound -> "journey.flag.navigator.siren." + sound)\n      .build()\n    .build());\n}\n')))}u.isMDXComponent=!0}}]);